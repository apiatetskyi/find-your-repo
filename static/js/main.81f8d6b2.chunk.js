(this["webpackJsonpgenesis-test"]=this["webpackJsonpgenesis-test"]||[]).push([[0],{117:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(9),c=n.n(o),i=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function s(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var l=n(10),u=r.a.createContext({isOnline:window.NavigationPreloadManager.onLine}),p=function(e){var t=e.children,n=Object(a.useState)(window.navigator.onLine),o=Object(l.a)(n,2),c=o[0],i=o[1];Object(a.useEffect)((function(){return i(window.navigator.onLine),window.addEventListener("online",s),window.addEventListener("offline",s),function(){window.removeEventListener("online",s),window.removeEventListener("offline",s)}}),[]);var s=function(e){i("online"===e.type)};return r.a.createElement(u.Provider,{value:{isOnline:c}},t)},m=n(16),f=n.n(m),d=n(24),g=n(166),h=n(169),v=n(171),b=n(180),w=n(118),E=n(172),y=n(174),O=n(68),j=n.n(O).a.create({baseURL:"https://api.github.com"});j.interceptors.request.use((function(e){return e.params=e.params||{},e.params.per_page=30,e}));var x=j,S={per_page:30,sort:"stars",order:"desc"},k=[{label:"DESC",order:"desc"},{label:"ASC",order:"asc"}],C=n(79),N=function(e){return Object(C.a)(e.entries()).reduce((function(e,t){var n=Object(l.a)(t,2),a=n[0],r=n[1];return e[a]=r,e}),{})},P=function(e,t){return Math.ceil(Math.min(1e3,e)/t)},W=function(e){var t={403:"You exceeded rate limit 30 request per minute. Please try again later.",422:"Only the first 1000 search results are available.",default:"Oops! Something went wrong. Please try again later."};return t[e]||t.default},R=function(e,t){var n=Object(a.useState)(!1),r=Object(l.a)(n,2),o=r[0],i=r[1],s=Object(a.useState)({}),u=Object(l.a)(s,2),p=u[0],m=u[1],g=Object(a.useState)(),h=Object(l.a)(g,2),v=h[0],b=h[1];return{response:p,errorMessage:v,loading:o,fetchData:Object(a.useCallback)(function(){var n=Object(d.a)(f.a.mark((function n(a){var r;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i(!0),b(null),!window.navigator.onLine){n.next=15;break}return n.prev=3,n.next=6,e.get(t,{params:a});case 6:return r=n.sent,c.a.unstable_batchedUpdates((function(){m(r.data),i(!1)})),n.abrupt("return",r);case 11:n.prev=11,n.t0=n.catch(3),b(W(n.t0.response.status)),i(!1);case 15:case"end":return n.stop()}}),n,null,[[3,11]])})));return function(e){return n.apply(this,arguments)}}(),[e,t]),setResponse:m}},L=n(41),_=function(e){var t=Object(a.useState)(Object(L.a)(Object(L.a)({},N(new URLSearchParams(window.location.search))),e)),n=Object(l.a)(t,2),r=n[0],o=n[1];return{params:r,updateParams:function(e){o((function(t){if(function(e,t){return Object.keys(t).every((function(n){return t[n]===e[n]}))}(t,e))return t;var n=Object(L.a)(Object(L.a)({},t),e),a=new URLSearchParams(Object.entries(n));return window.history.pushState({params:n},null,"".concat(window.location.pathname,"?").concat(a.toString())),n}))}}},T=function(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),r=n[0],o=n[1];return Object(a.useEffect)((function(){"caches"in window&&o(!0)}),[]),{hasCache:r,addCache:function(){var t=Object(d.a)(f.a.mark((function t(n,a){var r,o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.caches.open(e);case 2:return r=t.sent,t.next=5,r.keys();case 5:(o=t.sent).length>=10&&r.delete(o[o.length-1]),r.put(n,new Response(JSON.stringify(a)));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),getCache:function(){var t=Object(d.a)(f.a.mark((function t(n){var a,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.caches.open(e);case 2:return a=t.sent,t.next=5,a.match(n);case 5:if(!(r=t.sent)){t.next=12;break}return t.next=9,r.json();case 9:t.t0=t.sent,t.next=13;break;case 12:t.t0=null;case 13:return t.abrupt("return",t.t0);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getAllCaches:function(){var t=Object(d.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.caches.open(e);case 2:if(!(n=t.sent)){t.next=9;break}return t.next=6,n.keys();case 6:t.t0=t.sent,t.next=10;break;case 9:t.t0=[];case 10:return t.abrupt("return",t.t0);case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}},q=n(178),z=n(158),I=n(165),U=n(75),A=n.n(U),B=r.a.memo((function(e){var t=e.onSubmit,n=e.value,o=void 0===n?"":n,c=Object(a.useState)(o),i=Object(l.a)(c,2),s=i[0],u=i[1];return r.a.createElement("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),s&&t(s)}},r.a.createElement(z.a,{container:!0,spacing:2},r.a.createElement(z.a,{item:!0,xs:12,sm:9,md:10},r.a.createElement(q.a,{id:"seach-field",label:"Enter repository name",type:"search",fullWidth:!0,variant:"outlined",value:s,onChange:function(e){u(e.target.value)}})),r.a.createElement(z.a,{item:!0,sm:3,md:2,container:!0,alignItems:"stretch"},r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary",size:"large",fullWidth:!0,endIcon:r.a.createElement(A.a,null)},"Find"))))})),M=n(164),D=n(177),F=n(175),H=n(176),J=1,V=function(e){var t=e.onChange,n=void 0===t?function(){}:t,a=e.options,o=void 0===a?[{value:"no_value",label:"None"}]:a,c=e.defaultOption,i=void 0===c?0:c,s=e.label,l=void 0===s?"":s,u="label-id-".concat(++J);return o.length?r.a.createElement(M.a,{fullWidth:!0},r.a.createElement(D.a,{shrink:!0,variant:"outlined",id:u},l),r.a.createElement(F.a,{defaultValue:o[i].value,type:"select",variant:"outlined",labelId:u,label:l,displayEmpty:!0,onChange:n},o.map((function(e){var t=e.value,n=e.label;return r.a.createElement(H.a,{key:t,value:t},n)})))):null},Y=Object(g.a)((function(e){return{alert:{marginBottom:e.spacing(3)}}})),$=function(e){var t=e.hasCache,n=void 0!==t&&t,o=Y(),c=Object(a.useContext)(u).isOnline;return c||n?c?null:r.a.createElement(y.a,{className:o.alert,severity:"warning"},"You are working in offline mode. Only previous 10 search requests are available."):r.a.createElement(y.a,{className:o.alert,severity:"error"},"Please check your internet connection.")},G=n(173),K=n(78),Q=r.a.memo((function(e){var t=e.options,n=void 0===t?[]:t,o=e.onChange,c=void 0===o?function(){}:o,i=Object(a.useState)(null),s=Object(l.a)(i,2),u=s[0],p=s[1],m=Object(a.useState)(n[0].label),f=Object(l.a)(m,2),d=f[0],g=f[1];return r.a.createElement("div",null,r.a.createElement(I.a,{"aria-haspopup":"true",onClick:function(e){p(e.currentTarget)}},"Stars: ",d),r.a.createElement(K.a,{anchorEl:u,keepMounted:!0,open:Boolean(u),onClose:function(e){p(null)}},n.map((function(e){return r.a.createElement(H.a,{key:e.label,onClick:function(){!function(e){g(e.label),c(e.order),p(null)}(e)}},e.label)}))))})),X=n(167),Z=n(168),ee=n(170),te=n(76),ne=n.n(te),ae=n(77),re=n.n(ae),oe=Object(g.a)((function(e){return{root:{position:"relative"},content:{padding:e.spacing(1)},stars:{position:"absolute",bottom:e.spacing(1.5),right:e.spacing(1),display:"flex",alignItems:"center",maxWidth:e.typography.pxToRem(60),fontSize:e.typography.pxToRem(12)},starsIcon:{marginRight:e.spacing(.25)}}})),ce=r.a.memo((function(e){var t=e.repository,n=oe(),a=t.html_url,o=t.name,c=t.owner,i=t.stargazers_count;return r.a.createElement(X.a,{className:n.root},r.a.createElement(Z.a,{className:n.content},r.a.createElement(h.a,{color:"primary",noWrap:!0},o),r.a.createElement(h.a,{className:n.stars},r.a.createElement(ne.a,{className:n.starsIcon,fontSize:"small"}),i),r.a.createElement(h.a,{color:"textSecondary",variant:"caption"},"Author: ",c.login)),r.a.createElement(ee.a,null,r.a.createElement(I.a,{variant:"outlined",color:"primary",href:a,size:"small",target:"_blank",rel:"noopener",endIcon:r.a.createElement(re.a,null)},"View on")))})),ie=r.a.memo((function(e){var t=e.repositories;return r.a.createElement(z.a,{container:!0,spacing:2},t.map((function(e){return r.a.createElement(z.a,{key:e.id,item:!0,xs:12,sm:6,md:4,lg:2},r.a.createElement(ce,{repository:e}))})))})),se=Object(g.a)((function(e){return{sectionHeading:{marginBottom:e.spacing(2),fontSize:e.typography.pxToRem(18),fontWeight:e.typography.fontWeightBold},pagination:{marginTop:e.spacing(2)},sorting:{float:"right",fontSize:e.typography.pxToRem(14),fontWeight:e.typography.fontWeightRegular}}})),le=function(e){var t=e.onPaging,n=void 0===t?function(){}:t,o=e.onSorting,c=void 0===o?function(){}:o,i=e.currentPage,s=void 0===i?1:i,l=e.response,p=void 0===l?[]:l,m=se(),f=Object(a.useContext)(u).isOnline,d=P(p.total_count,S.per_page);return p.total_count>0?r.a.createElement(r.a.Fragment,null,f&&r.a.createElement("div",{className:m.sorting},r.a.createElement(Q,{options:k,onChange:c})),r.a.createElement(h.a,{className:m.sectionHeading,variant:"h2"},"Search results"),r.a.createElement(ie,{repositories:p.items}),f&&d>1&&r.a.createElement(G.a,{className:m.pagination,onChange:function(e,t){n(t)},count:P(p.total_count,S.per_page),color:"primary",page:parseInt(s,10)||1})):r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{className:m.sectionHeading,variant:"h2"},"Nothing found"))},ue=Object(g.a)((function(e){return{container:{marginTop:e.spacing(2)},h1:{fontSize:e.typography.pxToRem(28),fontWeight:e.typography.fontWeightBold},paper:{padding:e.spacing(2)},section:{marginTop:e.spacing(3)},loading:{zIndex:e.zIndex.drawer+1,color:"#fff"},alert:{marginBottom:e.spacing(3)}}})),pe=function(){var e=ue(),t=Object(a.useState)([]),n=Object(l.a)(t,2),o=n[0],c=n[1],i=_(S),s=i.params,p=i.updateParams,m=T("search-cache"),g=m.getCache,O=m.addCache,j=m.getAllCaches,k=R(x,"/search/repositories"),C=k.loading,P=k.response,W=k.errorMessage,L=k.fetchData,q=k.setResponse,z=Object(a.useContext)(u).isOnline;Object(a.useEffect)((function(){var e=function(e){var t=new URLSearchParams(e).toString();return"".concat(window.location.pathname,"?").concat(t)}(s);Object(d.a)(f.a.mark((function t(){var n,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(e);case 2:if((n=t.sent)&&q(n.data),!s.q||!z){t.next=9;break}return t.next=7,L(s);case 7:(a=t.sent)&&O(e,a);case 9:case"end":return t.stop()}}),t)})))()}),[s]),Object(a.useEffect)((function(){j().then((function(e){c(e.map((function(e){var t=new URL(e.url),n=t.searchParams.get("page"),a=t.searchParams.get("order"),r=t.searchParams.get("q");return{value:t.searchParams.toString(),label:"".concat(r," (page: ").concat(n,"; order: ").concat(a,")"),request:e}})))}))}),[z]);return r.a.createElement(v.a,{className:e.container,maxWidth:"lg"},W&&r.a.createElement(y.a,{className:e.alert,severity:"warning"},W),r.a.createElement($,{hasCache:o.length}),r.a.createElement(h.a,{className:e.h1,variant:"h1"},"Find your repo"),r.a.createElement(w.a,{className:"".concat(e.paper," ").concat(e.section)},z&&r.a.createElement(B,{onSubmit:function(e){p({q:e,page:1})},value:s.q||""}),!z&&r.a.createElement(V,{label:"Previous search requests",onChange:function(e){p(N(new URLSearchParams(e.target.value)))},options:o})),C&&r.a.createElement(b.a,{className:e.loading,open:C},r.a.createElement(E.a,{color:"inherit"})),!!P.items&&r.a.createElement("div",{className:e.section},r.a.createElement(le,{onPaging:function(e){p({page:e})},onSorting:function(e){p({order:e,page:1})},response:P,currentPage:s.page})))};!function(e){if("serviceWorker"in navigator){if(new URL("/find-your-repo",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/find-your-repo","/service-worker.js");i?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):s(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):s(t,e)}))}}(),c.a.render(r.a.createElement(p,null,r.a.createElement(pe,null)),document.querySelector("#root"))},90:function(e,t,n){e.exports=n(117)}},[[90,1,2]]]);
//# sourceMappingURL=main.81f8d6b2.chunk.js.map